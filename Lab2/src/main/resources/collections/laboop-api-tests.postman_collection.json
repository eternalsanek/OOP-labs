{
  "info": {
    "_postman_id": "laboop-api-collection",
    "name": "LabOOP API Tests",
    "description": "–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ API –¥–ª—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã OOP",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "üìä Environment Setup",
      "item": [
        {
          "name": "Initialize Test Data",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤",
                  "pm.collectionVariables.set(\"testPassword\", \"test_password_123\");",
                  "pm.collectionVariables.set(\"testUserName\", \"TestUser_\" + Date.now());",
                  "console.log(\"Test data initialized\");"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": ["{{baseUrl}}"],
              "path": ["users"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "üë• Users API Tests",
      "item": [
        {
          "name": "Create User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"{{testUserName}}\",\n  \"role\": \"USER\",\n  \"passwordHash\": \"{{testPassword}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": ["{{baseUrl}}"],
              "path": ["users"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has user data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('name');",
                  "    pm.expect(jsonData).to.have.property('role');",
                  "    pm.expect(jsonData).to.have.property('passwordHash');",
                  "    ",
                  "    // Store user ID for later use",
                  "    pm.collectionVariables.set(\"userId\", jsonData.id);",
                  "    console.log(\"Created user ID: \" + jsonData.id);",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"createUserTime\", pm.response.responseTime);",
                  "console.log(\"Create User time: \" + pm.response.responseTime + \"ms\");"
                ]
              }
            }
          ]
        },
        {
          "name": "Get All Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": ["{{baseUrl}}"],
              "path": ["users"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is array\", function () {",
                  "    pm.expect(pm.response.json()).to.be.an('array');",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"getAllUsersTime\", pm.response.responseTime);",
                  "console.log(\"Get All Users time: \" + pm.response.responseTime + \"ms\");"
                ]
              }
            }
          ]
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{userId}}"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has correct user\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.id).to.equal(pm.collectionVariables.get(\"userId\"));",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"getUserByIdTime\", pm.response.responseTime);"
                ]
              }
            }
          ]
        },
        {
          "name": "Update User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"{{testUserName}}_Updated\",\n  \"role\": \"ADMIN\",\n  \"passwordHash\": \"{{testPassword}}_updated\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{userId}}"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"updateUserTime\", pm.response.responseTime);"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete User",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{userId}}"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 204\", function () {",
                  "    pm.response.to.have.status(204);",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"deleteUserTime\", pm.response.responseTime);"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üìà Functions API Tests",
      "item": [
        {
          "name": "Pre-create User for Function",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// –°–æ–∑–¥–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π",
                  "const functionOwnerName = \"FunctionOwner_\" + Date.now();",
                  "pm.variables.set(\"functionOwnerName\", functionOwnerName);"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "var jsonData = pm.response.json();",
                  "pm.collectionVariables.set(\"functionOwnerId\", jsonData.id);",
                  "console.log(\"Function owner created: \" + jsonData.id);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"{{functionOwnerName}}\",\n  \"role\": \"USER\",\n  \"passwordHash\": \"{{testPassword}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": ["{{baseUrl}}"],
              "path": ["users"]
            }
          },
          "response": []
        },
        {
          "name": "Create Function",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test Function\",\n  \"type\": \"MathFunction\",\n  \"expression\": \"x^2 + 2x + 1\",\n  \"ownerId\": \"{{functionOwnerId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/functions",
              "host": ["{{baseUrl}}"],
              "path": ["functions"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has function data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('name');",
                  "    pm.expect(jsonData).to.have.property('type');",
                  "    pm.expect(jsonData).to.have.property('ownerId');",
                  "    ",
                  "    pm.collectionVariables.set(\"functionId\", jsonData.id);",
                  "    console.log(\"Created function ID: \" + jsonData.id);",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"createFunctionTime\", pm.response.responseTime);"
                ]
              }
            }
          ]
        },
        {
          "name": "Get All Functions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/functions",
              "host": ["{{baseUrl}}"],
              "path": ["functions"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"getAllFunctionsTime\", pm.response.responseTime);"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Function by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/functions/{{functionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["functions", "{{functionId}}"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"getFunctionByIdTime\", pm.response.responseTime);"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Function",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Test Function\",\n  \"type\": \"TabulatedFunction\",\n  \"expression\": \"sin(x)\",\n  \"ownerId\": \"{{functionOwnerId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/functions/{{functionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["functions", "{{functionId}}"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"updateFunctionTime\", pm.response.responseTime);"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Function",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/functions/{{functionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["functions", "{{functionId}}"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 204\", function () {",
                  "    pm.response.to.have.status(204);",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"deleteFunctionTime\", pm.response.responseTime);"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üìç Points API Tests",
      "item": [
        {
          "name": "Pre-create User for Points",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// –°–æ–∑–¥–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤ —Ç–æ—á–µ–∫",
                  "const pointsOwnerName = \"PointsOwner_\" + Date.now();",
                  "pm.variables.set(\"pointsOwnerName\", pointsOwnerName);"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "var jsonData = pm.response.json();",
                  "pm.collectionVariables.set(\"pointsOwnerId\", jsonData.id);",
                  "console.log(\"Points owner created: \" + jsonData.id);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"{{pointsOwnerName}}\",\n  \"role\": \"USER\",\n  \"passwordHash\": \"{{testPassword}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": ["{{baseUrl}}"],
              "path": ["users"]
            }
          },
          "response": []
        },
        {
          "name": "Pre-create Function for Points",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// –°–æ–∑–¥–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —Ç–µ—Å—Ç–æ–≤ —Ç–æ—á–µ–∫",
                  "const pointsFunctionName = \"PointsTestFunction_\" + Date.now();",
                  "pm.variables.set(\"pointsFunctionName\", pointsFunctionName);"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "var jsonData = pm.response.json();",
                  "pm.collectionVariables.set(\"pointsFunctionId\", jsonData.id);",
                  "pm.collectionVariables.set(\"functionId\", jsonData.id); // –î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Ç–µ—Å—Ç–∞–º–∏",
                  "console.log(\"Function for points created: \" + jsonData.id);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"{{pointsFunctionName}}\",\n  \"type\": \"MathFunction\",\n  \"expression\": \"x^2 + 3x - 5\",\n  \"ownerId\": \"{{pointsOwnerId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/functions",
              "host": ["{{baseUrl}}"],
              "path": ["functions"]
            }
          },
          "response": []
        },
        {
          "name": "Create Point",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è BigDecimal",
                  "const xVal = (Math.random() * 10).toFixed(10);",
                  "const yVal = (Math.random() * 10).toFixed(10);",
                  "pm.variables.set(\"xVal\", xVal.toString());",
                  "pm.variables.set(\"yVal\", yVal.toString());",
                  "console.log(`Generated xVal: ${xVal}, yVal: ${yVal}`);"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has point data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('functionId');",
                  "    pm.expect(jsonData).to.have.property('xVal');",
                  "    pm.expect(jsonData).to.have.property('yVal');",
                  "    ",
                  "    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è BigDecimal –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã",
                  "    if (jsonData.xVal !== undefined) {",
                  "        const xValNum = parseFloat(jsonData.xVal);",
                  "        pm.expect(xValNum).to.be.a('number');",
                  "        pm.expect(isNaN(xValNum)).to.be.false;",
                  "        console.log(`Received xVal: ${jsonData.xVal} (as number: ${xValNum})`);",
                  "    }",
                  "    ",
                  "    if (jsonData.yVal !== undefined) {",
                  "        const yValNum = parseFloat(jsonData.yVal);",
                  "        pm.expect(yValNum).to.be.a('number');",
                  "        pm.expect(isNaN(yValNum)).to.be.false;",
                  "        console.log(`Received yVal: ${jsonData.yVal} (as number: ${yValNum})`);",
                  "    }",
                  "    ",
                  "    pm.collectionVariables.set(\"pointId\", jsonData.id);",
                  "    console.log(\"Created point ID: \" + jsonData.id);",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"createPointTime\", pm.response.responseTime);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"functionId\": \"{{pointsFunctionId}}\",\n  \"xVal\": \"{{xVal}}\",\n  \"yVal\": \"{{yVal}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/points",
              "host": ["{{baseUrl}}"],
              "path": ["points"]
            }
          },
          "response": []
        },
        {
          "name": "Get All Points",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/points",
              "host": ["{{baseUrl}}"],
              "path": ["points"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response contains BigDecimal fields\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "    ",
                  "    if (jsonData.length > 0) {",
                  "        var firstPoint = jsonData[0];",
                  "        console.log(\"First point:\", firstPoint);",
                  "        pm.expect(firstPoint).to.have.property('xVal');",
                  "        pm.expect(firstPoint).to.have.property('yVal');",
                  "        ",
                  "        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ —á–∏—Å–ª–∞",
                  "        if (firstPoint.xVal !== null && firstPoint.xVal !== undefined) {",
                  "            const xValNum = parseFloat(firstPoint.xVal);",
                  "            pm.expect(xValNum).to.be.a('number');",
                  "            pm.expect(isNaN(xValNum)).to.be.false;",
                  "        }",
                  "    }",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"getAllPointsTime\", pm.response.responseTime);"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Point by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/points/{{pointId}}",
              "host": ["{{baseUrl}}"],
              "path": ["points", "{{pointId}}"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has BigDecimal values\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.id).to.equal(pm.collectionVariables.get(\"pointId\"));",
                  "    pm.expect(jsonData).to.have.property('xVal');",
                  "    pm.expect(jsonData).to.have.property('yVal');",
                  "    ",
                  "    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç BigDecimal",
                  "    if (jsonData.xVal !== null && jsonData.xVal !== undefined) {",
                  "        console.log(`Point xVal: ${jsonData.xVal}, type: ${typeof jsonData.xVal}`);",
                  "        // BigDecimal –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π –∏–ª–∏ —á–∏—Å–ª–æ–º",
                  "        const xValNum = parseFloat(jsonData.xVal);",
                  "        pm.expect(isNaN(xValNum)).to.be.false;",
                  "    }",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"getPointByIdTime\", pm.response.responseTime);"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Point",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–µ BigDecimal –∑–Ω–∞—á–µ–Ω–∏—è",
                  "const newXVal = (Math.random() * 20).toFixed(10);",
                  "const newYVal = (Math.random() * 20).toFixed(10);",
                  "pm.variables.set(\"newXVal\", newXVal.toString());",
                  "pm.variables.set(\"newYVal\", newYVal.toString());",
                  "console.log(`New values - xVal: ${newXVal}, yVal: ${newYVal}`);"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Point updated with new BigDecimal values\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.id).to.equal(pm.collectionVariables.get(\"pointId\"));",
                  "    pm.expect(jsonData).to.have.property('xVal');",
                  "    pm.expect(jsonData).to.have.property('yVal');",
                  "    ",
                  "    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑–º–µ–Ω–∏–ª–∏—Å—å",
                  "    const expectedX = parseFloat(pm.variables.get(\"newXVal\"));",
                  "    const actualX = parseFloat(jsonData.xVal);",
                  "    const tolerance = 0.000001; // –î–æ–ø—É—Å–∫ –¥–ª—è BigDecimal —Å—Ä–∞–≤–Ω–µ–Ω–∏—è",
                  "    ",
                  "    pm.expect(Math.abs(actualX - expectedX)).to.be.below(tolerance);",
                  "    console.log(`Updated xVal: ${jsonData.xVal} (expected: ${expectedX})`);",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"updatePointTime\", pm.response.responseTime);"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"functionId\": \"{{pointsFunctionId}}\",\n  \"xVal\": \"{{newXVal}}\",\n  \"yVal\": \"{{newYVal}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/points/{{pointId}}",
              "host": ["{{baseUrl}}"],
              "path": ["points", "{{pointId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Point",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/points/{{pointId}}",
              "host": ["{{baseUrl}}"],
              "path": ["points", "{{pointId}}"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 204\", function () {",
                  "    pm.response.to.have.status(204);",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"deletePointTime\", pm.response.responseTime);"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üîç Search API Tests",
      "item": [
        {
          "name": "Search Users",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"criteria\": [\n    {\n      \"fieldName\": \"name\",\n      \"operation\": \"LIKE\",\n      \"value\": \"Test\"\n    }\n  ],\n  \"page\": 0,\n  \"size\": 10\n}"
            },
            "url": {
              "raw": "{{searchBaseUrl}}/users",
              "host": ["{{searchBaseUrl}}"],
              "path": ["users"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"searchUsersTime\", pm.response.responseTime);"
                ]
              }
            }
          ]
        },
        {
          "name": "Search Functions",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"criteria\": [\n    {\n      \"fieldName\": \"type\",\n      \"operation\": \"EQUALS\",\n      \"value\": \"MathFunction\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{searchBaseUrl}}/functions",
              "host": ["{{searchBaseUrl}}"],
              "path": ["functions"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Store execution time",
                  "pm.collectionVariables.set(\"searchFunctionsTime\", pm.response.responseTime);"
                ]
              }
            }
          ]
        },
        {
          "name": "üìä Performance Report",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": ["{{baseUrl}}"],
              "path": ["users"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Collect all timing data",
                  "const results = {",
                  "    users: {",
                  "        createUser: pm.collectionVariables.get(\"createUserTime\") || 0,",
                  "        getAllUsers: pm.collectionVariables.get(\"getAllUsersTime\") || 0,",
                  "        getUserById: pm.collectionVariables.get(\"getUserByIdTime\") || 0,",
                  "        updateUser: pm.collectionVariables.get(\"updateUserTime\") || 0,",
                  "        deleteUser: pm.collectionVariables.get(\"deleteUserTime\") || 0",
                  "    },",
                  "    functions: {",
                  "        createFunction: pm.collectionVariables.get(\"createFunctionTime\") || 0,",
                  "        getAllFunctions: pm.collectionVariables.get(\"getAllFunctionsTime\") || 0,",
                  "        getFunctionById: pm.collectionVariables.get(\"getFunctionByIdTime\") || 0,",
                  "        updateFunction: pm.collectionVariables.get(\"updateFunctionTime\") || 0,",
                  "        deleteFunction: pm.collectionVariables.get(\"deleteFunctionTime\") || 0",
                  "    },",
                  "    points: {",
                  "        createPoint: pm.collectionVariables.get(\"createPointTime\") || 0,",
                  "        getAllPoints: pm.collectionVariables.get(\"getAllPointsTime\") || 0,",
                  "        getPointById: pm.collectionVariables.get(\"getPointByIdTime\") || 0,",
                  "        updatePoint: pm.collectionVariables.get(\"updatePointTime\") || 0,",
                  "        deletePoint: pm.collectionVariables.get(\"deletePointTime\") || 0",
                  "    },",
                  "    search: {",
                  "        searchUsers: pm.collectionVariables.get(\"searchUsersTime\") || 0,",
                  "        searchFunctions: pm.collectionVariables.get(\"searchFunctionsTime\") || 0",
                  "    }",
                  "};",
                  "",
                  "console.log(\"\\n\" + \"=\".repeat(80));",
                  "console.log(\"üìä API PERFORMANCE TEST RESULTS\");",
                  "console.log(\"=\" + new Date().toLocaleString().padEnd(78) + \"=\");",
                  "console.log(\"=\" + \"Application: LabOOP API (Docker)\".padEnd(68) + \"=\");",
                  "console.log(\"=\" + \"Container: \" + pm.variables.get(\"containerName\")?.padEnd(69) || \"laboop-app\".padEnd(69) + \"=\");",
                  "console.log(\"=\".repeat(80));",
                  "",
                  "// Calculate statistics",
                  "let allTimes = [];",
                  "let csvData = \"Category,Operation,Time(ms),Performance\\n\";",
                  "let markdownData = \"# API Performance Test Results\\n\\n\";",
                  "markdownData += `**Test Date:** ${new Date().toLocaleString()}\\n\\n`;",
                  "markdownData += \"## Results Table\\n\\n\";",
                  "markdownData += \"| Category | Operation | Time (ms) | Performance |\\n\";",
                  "markdownData += \"|----------|-----------|-----------|-------------|\\n\";",
                  "",
                  "Object.entries(results).forEach(([category, operations]) => {",
                  "    Object.entries(operations).forEach(([operation, time]) => {",
                  "        if (time > 0) {",
                  "            allTimes.push(time);",
                  "            ",
                  "            let performance = \"\";",
                  "            let perfEmoji = \"\";",
                  "            ",
                  "            if (time < 50) {",
                  "                performance = \"Excellent\";",
                  "                perfEmoji = \"üü¢\";",
                  "            } else if (time < 100) {",
                  "                performance = \"Good\";",
                  "                perfEmoji = \"üü°\";",
                  "            } else if (time < 200) {",
                  "                performance = \"Acceptable\";",
                  "                perfEmoji = \"üîµ\";",
                  "            } else {",
                  "                performance = \"Needs Improvement\";",
                  "                perfEmoji = \"üî¥\";",
                  "            }",
                  "            ",
                  "            // Add to CSV",
                  "            csvData += `${category},${operation},${time.toFixed(2)},${performance}\\n`;",
                  "            ",
                  "            // Add to Markdown",
                  "            markdownData += `| ${category} | ${operation} | ${time.toFixed(2)} | ${perfEmoji} ${performance} |\\n`;",
                  "        }",
                  "    });",
                  "});",
                  "",
                  "// Generate summary",
                  "const avgTime = allTimes.length > 0 ? allTimes.reduce((a, b) => a + b, 0) / allTimes.length : 0;",
                  "const maxTime = allTimes.length > 0 ? Math.max(...allTimes) : 0;",
                  "const minTime = allTimes.length > 0 ? Math.min(...allTimes) : 0;",
                  "",
                  "// Create summary in markdown",
                  "markdownData += \"\\n## Statistics\\n\\n\";",
                  "markdownData += `- **Total operations:** ${allTimes.length}\\n`;",
                  "markdownData += `- **Average response time:** ${avgTime.toFixed(2)} ms\\n`;",
                  "markdownData += `- **Fastest response:** ${minTime.toFixed(2)} ms\\n`;",
                  "markdownData += `- **Slowest response:** ${maxTime.toFixed(2)} ms\\n`;",
                  "markdownData += `- **Test environment:** Docker container\\n`;",
                  "",
                  "console.log(\"\\nüìà SUMMARY:\");",
                  "console.log(`Total operations: ${allTimes.length}`);",
                  "console.log(`Average time: ${avgTime.toFixed(2)} ms`);",
                  "console.log(`Range: ${minTime.toFixed(2)} - ${maxTime.toFixed(2)} ms`);",
                  "",
                  "// Try to save files via API endpoint (if we can call our own API)",
                  "try {",
                  "    // Create a simple endpoint in your app to save reports",
                  "    const saveRequest = {",
                  "        url: pm.collectionVariables.get(\"baseUrl\") + \"/api/debug/save-report\",",
                  "        method: \"POST\",",
                  "        header: {",
                  "            \"Content-Type\": \"application/json\"",
                  "        },",
                  "        body: {",
                  "            mode: \"raw\",",
                  "            raw: JSON.stringify({",
                  "                timestamp: new Date().toISOString(),",
                  "                csv: csvData,",
                  "                markdown: markdownData,",
                  "                json: results",
                  "            })",
                  "        }",
                  "    };",
                  "    ",
                  "    // Send request to save report",
                  "    pm.sendRequest(saveRequest, function (err, response) {",
                  "        if (err) {",
                  "            console.log(\"‚ö†Ô∏è Could not save report via API\");",
                  "        } else {",
                  "            console.log(`‚úÖ Report saved via API: ${response.code}`);",
                  "        }",
                  "    });",
                  "} catch (e) {",
                  "    console.log(\"‚ö†Ô∏è API save not available\");",
                  "}",
                  "",
                  "// Display data for manual copying",
                  "console.log(\"\\nüìã COPY THIS DATA TO EXCEL:\");",
                  "console.log(csvData);",
                  "",
                  "console.log(\"\\nüìù MARKDOWN FOR GIT/WIKI:\");",
                  "console.log(markdownData.substring(0, 500) + \"...\");",
                  "",
                  "// Save to Postman variables",
                  "pm.collectionVariables.set(\"performanceCSV\", csvData);",
                  "pm.collectionVariables.set(\"performanceMarkdown\", markdownData);",
                  "pm.collectionVariables.set(\"performanceJSON\", JSON.stringify(results));",
                  "",
                  "console.log(\"\\nüíæ DATA SAVED TO POSTMAN VARIABLES:\");",
                  "console.log(\"- performanceCSV\");",
                  "console.log(\"- performanceMarkdown\");",
                  "console.log(\"- performanceJSON\");",
                  "",
                  "console.log(\"\\nüöÄ To save files from Docker:\");",
                  "console.log(\"1. Copy CSV data above\");",
                  "console.log(\"2. Save as .csv file on your machine\");",
                  "console.log(\"3. Or use docker cp command (see below)\");",
                  "",
                  "console.log(\"\\nüê≥ Docker commands to get data:\");",
                  "console.log(\"# Copy from container to host:\");",
                  "console.log(\"docker cp laboop-app:/app/reports/ ./\");",
                  "console.log(\"\\n# Or create a volume mount:\");",
                  "console.log(\"mkdir -p ./reports\");",
                  "console.log(\"docker run -v $(pwd)/reports:/app/reports ...\");"
                ]
              }
            }
          ]
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "exec": [
          "// Initialize test variables",
          "pm.collectionVariables.set(\"testPassword\", \"test_password_123\");",
          "console.log(\"Test started at: \" + new Date().toISOString());"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "exec": [
          "// Track test execution",
          "const testName = pm.info.requestName;",
          "console.log(`Test completed: ${testName} (${pm.response.responseTime}ms)`);"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://host.docker.internal:8080/api/v1"
    },
    {
      "key": "searchBaseUrl",
      "value": "http://host.docker.internal:8080/api/search"
    }
  ]
}